<!DOCTYPE html>
<html lang="en">
<head>
<title>DOM, Browser, Server</title>


	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="shower-ribbon/styles/screen-16x10.css">
	<style media="screen">
        .slide {
            padding-top: 70px;
        }

	</style>
</head>
<body class="shower list">
	<header class="caption">
        <h1>DOM, Browser, Server</h1>
    </header>

	<section class="slide">
        <h2 class="shout">DOM</h2>
    </section>

	<section class="slide">
        <h2>Document Object Model</h2>
        <pre>
            <code>&lt;html&gt;</code>
            <code>    &lt;head&gt;</code>
            <code>        &lt;title&gt;Example&lt;/title&gt;</code>
            <code>    &lt;/head&gt;</code>
            <code>    &lt;body&gt;</code>
            <code>        &lt;p&gt;This is an example page&lt;/p&gt;</code>
            <code>        &lt;h1&gt;Example page&lt;/h1&gt;</code>
            <code>    &lt;/body&gt;</code>
            <code>&lt;/html&gt;</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Document Object Model</h2>
        <center><img src="pictures/dom1.jpg" width="70%" alt=""></center>
    </section>

    <section class="slide">
        <h2>Отображение страницы</h2>
        <ul>
            <li>загрузка html ресурса</li>
            <li>лексический и синтаксический анализ</li>
            <li>построение <mark>синтаксического дерева</mark></li>
            <li>загрузка и обработка CSS</li>
            <li>построение CSSOM</li>
            <li>построение дерева отображения</li>
            <li>...</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Document Object Model</h2>
        <ul>
            <li>программный интерфейс к HTML (XML) документам</li>
            <li>представляет из себя группу узлов</li>
            <li>каждый узел имеет свойства и методы</li>
            <li>в браузере доступна для JavaScript</li>
        </ul>
    </section>

    <section class="slide">
        <h2>DOM, типы объектов</h2>
        <ul>
            <li><code>document</code> – корневой элемент</li>
            <li><code>element</code> – узел DOM</li>
            <li><code>NodeList</code> – коллекция из element</li>
            <li><code>HTMLCollection</code> – коллекция из element</li>
            <li><code>attribute</code> – ссылка на объект для работы с атрибутами</li>
            <li><code>namedNodeMap</code> – map из element</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Выбор элементов</h2>
        <div>Возвращают <mark>живые</mark> коллекции <code>NodeList</code></div>
        <ul>
            <li><code>document.getElementById</code></li>
            <li><code>document.getElementsByName</code></li>
            <li><code>document.getElementsByTagName</code></li>
            <li><code>document.getElementsByClassName</code></li>
        </ul>

        <div>Возвращают <mark>статические</mark> коллекции <code>NodeList</code></div>
        <ul>
            <li><code>document.querySelectorAll</code></li>
            <li><code>document.querySelector</code></li>
        </ul>
    </section>

    <section class="slide">
        <h2>Навигация по узлам</h2>
        <ul>
            <li><code>parentNode</code></li>
            <li><code>childNodes</code></li>
            <li><code>firstChild, lastChild</code></li>
            <li><code>nextSibling, previousSibling</code></li>
        </ul>
    </section>

    <section class="slide">
        <h2>Навигация по элементам</h2>
        <ul>
            <li><code><mark>parentNode</mark></code></li>
            <li><code>children</code></li>
            <li><code>firstElementChild, lastElementChild</code></li>
            <li><code>nextElementSibling, previousElementSibling</code></li>
        </ul>
    </section>

    <section class="slide">
        <h2>Атрибуты</h2>
        <ul>
            <li><code>attributes</code></li>
            <li><code>getAttribute</code></li>
            <li><code>setAttribute</code></li>
            <li><code>img.src</code></li>
            <li><code>img.html<mark>For</mark></code></li>
            <li><code>img.<mark>class</mark>Name</code></li>
            <li>верблюжийРегистр</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Содержимое элементов</h2>
        <pre>
            <code>var foo = document.getElementById('paragraph1');</code>
            <code>var html = foo.innerHtml; <span class="comment">// текст с разметкой</span></code>
            <code>var text = foo.innerText; <span class="comment">// только текст</span></code>
            <code>var p = foo.outerText;<span class="comment">// текст с разметкой включая себя</span></code>
        </pre>
    </section>

    <section class="slide">
        <h2>Создание новых узлов</h2>
        <pre>
            <code>var img = document.create<mark>Element</mark>('img');</code>
            <code>img.src = 'http://url/image.jpg';</code>
            <code>var text = document.create<mark>TextNode</mark>('Some text');</code>
            <code><span class="comment">/* А как добавить на страницу? */</span></code>
        </pre>
    </section>

    <section class="slide">
        <h2>Добавление на страницу</h2>
        <ul>
            <li><code>appendChild</code></li>
            <li><code>insertBefore</code></li>
        </ul>
        <pre>
            <code>var div = document.createElement('div');</code>
            <code>div.innerText = 'Hello';</code>
            <code>var form = document.getElementById('form1');</code>
            <code>form.appendChild(div);</code>
            <code><span class="comment">/* div - живая ссылка */</span></code>
        </pre>
    </section>

    <section class="slide">
        <h2><code>insertBefore</code></h2>
        <pre>
            <code>var div = document.createElement('div');</code>
            <code>div.innerText = 'Hello';</code>
            <code>var form = document.getElementById('form1');</code>
            <code><mark href="http://document.body">document.body</mark>.insertBefore(div, <mark>form</mark>);</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Удаление элементов</h2>
        <pre>
            <code>var <mark>form</mark> = document.getElementById('form1');</code>
            <code>var removedForm = document.body.removeChild(form);</code>
            <code><span class="comment">/* или */</span></code>
            <code>var <mark>removedForm</mark> = form.remove(); <span class="comment">// Не поддерживается в IE</span></code>
        </pre>
        <blockquote>Элемент не удаляется совсем, он исключается из DOM, но сохраняется в памяти до тех пор, пока на него существуют ссылки</blockquote>
    </section>

    <section class="slide">
        <h2>DocumentFragment</h2>
        <ul>
            <li><code>var fragment = document.createDocumentFragment();</code></li>
            <li>не имеет родительского элемента</li>
            <li>не имеет отражения в DOM документа</li>
            <li>частично поддерживает методы работы с дочерними элементами</li>
            <li><code>querySelector</code>, <code>querySelectorAll</code></li>
        </ul>
    </section>

    <section class="slide">
        <h2>События</h2>
        <code>target.addEventListener(type, listener[, useCapture]);</code>
        <ul>
            <li><code>type</code> - тип события</li>
            <li><code>listener</code> - объект принимающий событие или функция обратного вызова</li>
            <li><code>useCapture</code> - захват события <code>true/false</code></li>
        </ul>
    </section>

    <section class="slide">
        <h2>Совместимость</h2>
        <pre>
            <code>if (el.addEventListener) {<span class="comment"> // обычные браузеры</span></code>
            <code>    el.addEventListener('click', modifyText, false);</code>
            <code>} else if (el.attachEvent)  {<span class="comment"> // IE8-</span></code>
            <code>    el.attachEvent('onclick', modifyText);</code>
            <code>}</code>
            <code>function modifyText(<mark>event</mark>) {</code>
            <code>...</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Отписка от события</h2>
        <pre>
            <code>el.addEventListener('click', modifyText, false);</code>
            <code>function modifyText(event) {</code>
            <code>...</code>
            <code>}</code>
            <code>el.<mark>removeEventListener</mark>('click', modifyText, false);</code>
            <code>el.<mark>detachEvent</mark>('onclick', modifyText) <span class="comment">/* для IE8- */</span></code>
        </pre>
    </section>

    <section class="slide">
        <h2 class="shout">window</h2>
    </section>

    <section class="slide">
        <h2>Таймеры</h2>
        <pre>
            <code>var timerId = setTimeout(function(){...}, <mark>300</mark>);</code>
            <code>var intervalId = setInterval(function(){...}, <mark>1000</mark>);</code>
            <code>...</code>
            <code>clearTimeout(timerId);</code>
            <code>clearInterval(intervalId);</code>
        </pre>
    </section>

    <section class="slide">
        <h2>URL и история</h2>
        <ul>
            <li>Объект <code>Location</code>
                <ul>
                    <li><code>location.href</code></li>
                    <li><code>location.hash</code></li>
                    <li><code>location.origin</code></li>
                    <li><code>location.search</code></li>
                    <li><code>location.assign()</code></li>
                    <li><code>location.reload()</code></li>
                </ul>
            </li>
        </ul>
    </section>

    <section class="slide">
        <h2>URL и история</h2>
        <ul>
            <li>Объект <code>History</code>
                <ul>
                    <li><code>history.pushState()</code></li>
                    <li><code>history.replaceState()</code></li>
                    <li><code>history.back()</code></li>
                    <li><code>history.forward()</code></li>
                    <li><code>history.go()</code></li>
                </ul>
            </li>
        </ul>
    </section>

    <section class="slide">
        <h2><code href="http://history.pushState">history.pushState</code></h2>
        <pre>
            <code>var state = {data: someData};</code>
            <code>var title = 'My amazing page';</code>
            <code>var url = '/index.html';</code>
            <code>history.pushState(state, title, url);</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Как слушать переходы?</h2>
        <div>Событие <code>popstate</code></div>
        <pre>
            <code><span class="comment">// подписываемся на событие</span></code>
            <code>window.addEventListener('popstate', function(){</code>
            <code>    console.log('url changed');</code>
            <code>});</code>
        </pre>
    </section>

    <section class="slide">
        <h2 class="shout">640k</h2>
    </section>

    <section class="slide">
        <h2 class="shout">WebStorage</h2>
    </section>

    <section class="slide">
        <h2><code>localStorage</code></h2>
        <ul>
            <li>"постоянное" хранилище</li>
            <li>хранит ключ => значение</li>
            <li>данные хранит в виде строк</li>
            <li>досутпный размер хранилища зависит от браузера</li>
        </ul>
    </section>

    <section class="slide">
        <h2><code>localStorage</code></h2>
        <pre>
            <code>var data = {</code>
            <code>    a: 1,</code>
            <code>    b: 'text'</code>
            <code>};</code>
            <code>localStorage.setItem("data", <mark>JSON.stringify</mark>(data));</code>
            <code><span class="comment">// {"a":1,"b":"text"}</span></code>
        </pre>
    </section>

    <section class="slide">
        <h2><code>localStorage</code></h2>
        <pre>
            <code>var data = localStorage.<mark>getItem</mark>('data');</code>
            <code><span class="comment">// {"a":1,"b":"text"}</span></code>
            <code>console.log(JSON.parse(data)); <span class="comment">// Object</span></code>
            <code>console.log(localStorage.data);<span class="comment">// ???</span></code>
            <code>&nbsp;</code>
            <code>localStorage.<mark>removeItem</mark>('data');</code>
        </pre>
    </section>

    <section class="slide">
        <h2><code>sessionStorage</code></h2>
        <ul>
            <li>"временное" хранилище</li>
            <li>данные хранятся до закрытия вкладки или браузера</li>
            <li>хранит ключ => значение</li>
            <li>данные хранит в виде строк</li>
            <li>досутпный размер хранилища зависит от браузера</li>
        </ul>
    </section>

    <section class="slide">
        <h2 class="shout">Общение с сервером</h2>
    </section>

    <section class="slide">
        <h2>Общение с сервером</h2>
        <ul>
            <li>отправка форм</li>
            <li>XMLHttpRequest</li>
            <li>JSONP</li>
            <li>Fetch</li>
        </ul>
    </section>

    <section class="slide">
        <h2 class="shout">Методы HTTP</h2>
    </section>

    <section class="slide">
        <h2>Методы запросов HTTP</h2>
        <ul>
            <li><mark>GET</mark></li>
            <li>HEAD</li>
            <li><mark>POST</mark></li>
            <li>PUT</li>
            <li>PATCH</li>
            <li>OPTIONS</li>
            <li>DELETE</li>
            <li>TRACE</li>
            <li>CONNECT</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Коды ответов</h2>
        <ul>
            <li>1xx - информационные</li>
            <li>2xx - успешные</li>
            <li>3xx - перенаправления</li>
            <li>4xx - ошибки клиента</li>
            <li>5xx - ошибки сервера</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Часто используемые коды ответов</h2>
        <ul>
            <li><code>200 OK</code></li>
            <li><code>201 Created</code></li>
            <li><code>301 Moved Permanently</code></li>
            <li><code>302 Moved Temporarily</code></li>
        </ul>
    </section>
    <section class="slide">
        <h2>Часто используемые коды ответов</h2>
        <ul>
            <li><code>400 Bad Request</code></li>
            <li><code>401 Unauthorized</code></li>
            <li><code>403 Forbidden</code></li>
            <li><code>404 Not Found</code></li>
            <li><code>500 Internal Server Error</code></li>
            <li><code>502 Bad Gateway</code></li>
            <li><code>503 Service Unavailable</code></li>
            <li><code>504 Gateway Timeout</code></li>
        </ul>
    </section>

    <section class="slide">
        <h2>Общение с сервером</h2>
        <ul>
            <li><del>отправка форм</del></li>
            <li>XMLHttpRequest</li>
            <li>JSONP</li>
            <li>Fetch</li>
        </ul>
    </section>

    <section class="slide">
        <h2 class="shout">XMLHttpRequest</h2>
    </section>

    <section class="slide">
        <h2>Простой пример</h2>
        <pre>
            <code>var xhr = new XMLHttpRequest();</code>
            <code>xhr.open('GET', 'to/url.html', false);</code>
            <code>xhr.send();</code>
            <code>console.log(xhr.status);</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Простой пример</h2>
        <ul>
            <li>инициализировали объект</li>
            <li>настроили на <mark>синхронный</mark> запрос по методу GET</li>
            <li>отправили запрос</li>
            <li><mark>после того как сервер ответил</mark> вывели в консоль код статуса</li>
        </ul>
    </section>

    <section class="slide">
        <h2><code>open</code></h2>
        <code>.open(method, url, async, <mark>user, password</mark>)</code>
        <div>если <code>async = true</code> метод не блокирует страницу</div>
        <br /><br />
        <h2>Как получить статус в асинхронном режиме?</h2>
    </section>








	<div class="progress"></div>

	<script src="shower-core/shower.min.js"></script>
	<!-- Copyright © 2017 Yours Truly, Famous Inc. -->

</body>
</html>
